<!-- accounts/templates/accounts/password_reset_complete.html -->
{% extends "base.html" %}
{% load static %}

{% block title %}密码重置完成 - {{ site_settings.site_name }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card shadow-lg border-success">
            <div class="card-header bg-success text-white text-center py-4">
                <h2 class="mb-0">
                    <i class="bi bi-check-circle-fill me-2"></i>
                    密码重置成功
                </h2>
            </div>

            <div class="card-body p-4 p-md-5 text-center">
                <!-- 成功图标 -->
                <div class="mb-4">
                    <i class="bi bi-shield-check display-1 text-success"></i>
                </div>

                <!-- 成功消息 -->
                <h3 class="mb-4">恭喜！</h3>
                <p class="lead mb-4">
                    您的密码已成功重置，现在可以使用新密码登录了。
                </p>

                <!-- 安全提示 -->
                <div class="alert alert-info mb-4 text-start">
                    <h5 class="alert-heading mb-2">
                        <i class="bi bi-shield-lock me-2"></i>
                        安全提示：
                    </h5>
                    <ul class="mb-0">
                        <li>请确保您的新密码足够复杂，包含字母、数字和符号</li>
                        <li>不要在多个网站使用相同的密码</li>
                        <li>定期更换密码以提高安全性</li>
                        <li>如果您怀疑账户有异常活动，请立即联系我们</li>
                    </ul>
                </div>

                <!-- 自动跳转提示 -->
                <div class="alert alert-warning mb-4">
                    <i class="bi bi-clock me-2"></i>
                    <span id="countdown">10</span>秒后自动跳转到登录页面
                </div>

                <!-- 操作按钮 -->
                <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                    <a href="{% url 'accounts:login' %}" class="btn btn-success btn-lg me-md-2">
                        <i class="bi bi-box-arrow-in-right me-2"></i> 立即登录
                    </a>
                    <a href="{% url 'blog:home' %}" class="btn btn-outline-primary btn-lg">
                        <i class="bi bi-house-door me-2"></i> 返回首页
                    </a>
                </div>

                <!-- 额外帮助 -->
                <div class="mt-5 pt-4 border-top">
                    <h5 class="mb-3">需要更多帮助？</h5>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="card h-100 border-0 bg-light">
                                <div class="card-body">
                                    <i class="bi bi-question-circle display-6 text-primary mb-3"></i>
                                    <h6>常见问题</h6>
                                    <a href="#" class="small text-decoration-none">查看帮助文档</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card h-100 border-0 bg-light">
                                <div class="card-body">
                                    <i class="bi bi-headset display-6 text-info mb-3"></i>
                                    <h6>联系支持</h6>
                                    <a href="mailto:{{ site_settings.contact_email }}" class="small text-decoration-none">
                                        发送邮件
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card h-100 border-0 bg-light">
                                <div class="card-body">
                                    <i class="bi bi-gear display-6 text-secondary mb-3"></i>
                                    <h6>账户设置</h6>
                                    <a href="#" class="small text-decoration-none">管理账户</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-footer bg-light text-center py-3">
                <small class="text-muted">
                    感谢您使用{{ site_settings.site_name }}，我们将继续为您提供优质服务。
                </small>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// 自动跳转倒计时
let countdown = 10;
const countdownElement = document.getElementById('countdown');

if (countdownElement) {
    const countdownInterval = setInterval(() => {
        countdown--;
        countdownElement.textContent = countdown;

        if (countdown <= 0) {
            clearInterval(countdownInterval);
            window.location.href = "{% url 'accounts:login' %}";
        }
    }, 1000);
}

// 取消自动跳转
document.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', function() {
        if (countdownInterval) {
            clearInterval(countdownInterval);
            document.querySelector('.alert-warning').style.display = 'none';
        }
    });
});

// 添加成功动画
document.addEventListener('DOMContentLoaded', function() {
    const successIcon = document.querySelector('.bi-shield-check');
    if (successIcon) {
        successIcon.style.animation = 'bounce 1s ease infinite alternate';
    }
});

// 添加CSS动画
const style = document.createElement('style');
style.textContent = `
@keyframes bounce {
    from { transform: translateY(0px); }
    to { transform: translateY(-10px); }
}
`;
document.head.appendChild(style);
</script>
{% endblock %}